Class("App","linb.Com",{Instance:{iniComponents:function(){var C=this,B=[],A=function(D){B.push(D.get(0))};A((new linb.UI.PopMenu).host(C,"popmnuMatchingFee").setItems([{id:"popmenuDownload",caption:"Download Billing",image:"../../common/img/demo.gif"},{type:"split"},{id:"popmenuBilling",caption:"Billing Master",image:"../../common/img/demo.gif"},{type:"split"},{id:"popmenuTariff",caption:"Tariff Master",image:"../../common/img/demo.gif"}]));A((new linb.UI.Pane).host(C,"paneHeader").setDock("top").setHeight(51));C.paneHeader.append((new linb.UI.Block).host(C,"blockHeader").setDock("fill").setDockFloat(true).setPosition("relative"));C.blockHeader.append((new linb.UI.Label).host(C,"lbllastlogindtinfo").setLeft(120).setTop(110).setWidth(150).setTabindex(0).setVisibility("hidden").setCaption("").setHAlign("left"));C.blockHeader.append((new linb.UI.Label).host(C,"lblpasswordinfo").setLeft(120).setTop(80).setWidth(100).setTabindex(0).setVisibility("hidden").setCaption("").setHAlign("left"));C.blockHeader.append((new linb.UI.Label).host(C,"lblusernameinfo").setLeft(120).setTop(50).setWidth(100).setTabindex(0).setVisibility("hidden").setCaption("").setHAlign("left"));C.blockHeader.append((new linb.UI.Label).host(C,"lbluseridinfo").setLeft(120).setTop(20).setWidth(100).setTabindex(0).setVisibility("hidden").setCaption("").setHAlign("left"));C.blockHeader.append((new linb.UI.Label).host(C,"lblCompanyId").setLeft(120).setTop(20).setWidth(100).setTabindex(0).setVisibility("hidden").setCaption("").setHAlign("left"));C.blockHeader.append((new linb.UI.Label).host(C,"lblRole").setLeft(120).setTop(20).setWidth(100).setTabindex(0).setVisibility("hidden").setCaption("").setHAlign("left"));C.blockHeader.append((new linb.UI.Div).host(C,"div1").setLeft(15).setTop(7).setWidth(40).setHeight(31).setHtml("<img src='../../common/img/logo.jpg' width='35' height='35'>"));C.blockHeader.append((new linb.UI.Label).host(C,"label1").setLeft(60).setTop(28).setWidth(170).setHeight(12).setCaption("$app.caption.welcome").setHAlign("left").setFontSize("12px").setFontWeight("bold"));C.blockHeader.append((new linb.UI.Label).host(C,"lbluser").setLeft(125).setTop(28).setWidth(280).setHeight(12).setCaption("lbluser").setHAlign("left").setFontSize("12px").setFontWeight("bold"));C.blockHeader.append((new linb.UI.Div).host(C,"divRealMarket").setTop(15).setWidth(70).setHeight(20).setRight(270).setHtml("<a href='http://www.hontoichiba.com/' target='_blank'/><img src='../../common/img/logo_honto_toumei_small.gif' style='height: 25px; width: 60px;'></a>"));C.blockHeader.append((new linb.UI.Link).host(C,"lnkcontactus").setTop(25).setWidth(70).setRight(150).setCaption("$app.caption.contactus").setCustomStyle({KEY:"cursor:pointer"}).onClick("_lnkcontactus_onclick"));C.blockHeader.append((new linb.UI.Link).host(C,"lnkaccount").setTop(25).setHeight(16).setRight(125).setCaption("$app.caption.account").setCustomStyle({KEY:"cursor:pointer"}).onClick("_lnkaccount_onclick"));C.blockHeader.append((new linb.UI.Link).host(C,"lnkhome").setTop(25).setHeight(16).setRight(80).setCaption("$app.caption.home").setCustomStyle({KEY:"cursor:pointer"}).onClick("_lnkhome_onclick"));C.blockHeader.append((new linb.UI.Link).host(C,"lnkLogout").setTop(25).setHeight(16).setRight(10).setCaption("$app.caption.logout").setCustomStyle({KEY:"cursor:pointer"}).onClick("_lnklogout_onclick"));A((new linb.UI.Pane).host(C,"paneMenuBar").setDock("top").setHeight(28));C.paneMenuBar.append((new linb.UI.MenuBar).host(C,"menubar9").setItems([{id:"mnuFile",sub:[{id:"fileHistoryLogFile",image:"../../common/img/history.gif",caption:"$app.caption.historylogfile",disabled:true},{type:"split"},{id:"fileChangePassword",image:"../../common/img/key.gif",caption:"$app.caption.changepassword"},{type:"split"},{id:"fileLogoff",image:"../../common/img/logout.gif",caption:"$app.caption.logout"}],caption:"$app.caption.file"},{id:"mnuUtility",sub:[{id:"utilPrint",image:"../../common/img/Print.gif",caption:"$app.caption.print",disabled:true}],caption:"$app.caption.utility"},{id:"mnuHelp",sub:[{id:"helpAbout",caption:"$app.caption.abouteon"}],caption:"$app.caption.help"}]).onMenuSelected("_menubar9_onmenuselected"));A((new linb.UI.Layout).host(C,"layoutMain").setItems([{id:"before",pos:"before",locked:true,size:160,min:50,max:400,hide:false,cmd:true,folded:false,hidden:false},{id:"main",min:10}]).setType("horizontal").setCustomStyle({KEY:"border:0;"}));C.layoutMain.append((new linb.UI.Block).host(C,"blockLeftMenubutton").setDock("fill"),"before");C.blockLeftMenubutton.append((new linb.UI.Div).host(C,"div284").setLeft(15).setTop(20).setWidth(125).setHeight(20).setHtml("<center><b>$app.caption.maintenance</b></center>"));C.blockLeftMenubutton.append((new linb.UI.Button).host(C,"btnRolesMenu").setLeft(10).setTop(60).setWidth(130).setShadow(true).setDisabled(true).setCaption("$app.caption.menubtnroles").onClick("_btnrolesmenu_onclick"));C.blockLeftMenubutton.append((new linb.UI.Button).host(C,"btnCompanyMenu").setLeft(10).setTop(100).setWidth(130).setShadow(true).setCaption("$app.caption.menubtncompany").onClick("_btncompanymenu_onclick"));C.blockLeftMenubutton.append((new linb.UI.Button).host(C,"btnAnnouncementMenu").setLeft(10).setTop(180).setWidth(130).setShadow(true).setDisabled(true).setCaption("$app.caption.announcements").onClick("_btnannouncementmenu_onclick"));C.blockLeftMenubutton.append((new linb.UI.Button).host(C,"btnMatchingFeeMenu").setLeft(10).setTop(140).setWidth(130).setShadow(true).setDisabled(true).setCaption("$app.caption.menubtnmatchingfee").onClick("_btnmatchingfeemenu_onclick"));C.blockLeftMenubutton.append((new linb.UI.Label).host(C,"lblUserId").setLeft(80).setTop(0).setVisibility("hidden").setCaption(""));C.layoutMain.append((new linb.UI.Pane).host(C,"paneMainDisplay").setDock("fill").setCustomStyle({KEY:"background:#AAD2FA;border:solid 1px"}),"main");return B},events:{onReady:"_onready",onRender:"_onrender"},_onRender:function(A,B){this._getLoggedUser();_SPA=A},_onready:function(){_SPA=this;this._getLoggedUser()},iniResource:function(A,B){},iniExComs:function(A,B){},_btncompanymenu_onclick:function(A,D,E,C){var B=this;linb.ComFactory.getCom("App.company",function(){var F=this;B.paneMainDisplay.append(F.panelCompany,false)})},_btnmatchingfeemenu_onclick:function(A,C,D,B){this.popmnuMatchingFee.pop(A.getRoot());this.popmnuMatchingFee.$target=A},_lnkaccount_onclick:function(A,B,C){this.setProperties({fromRegion:linb.use(C).cssRegion(true)});linb.ComFactory.newCom("App.account",function(){var E=this;E.lbluseridinfo.setCaption(_SPA.lbluseridinfo.getCaption());E.lblusernameinfo.setCaption(_SPA.lblusernameinfo.getCaption());E.lblpasswordinfo.setCaption(_SPA.lblpasswordinfo.getCaption());var D=_SPA.lbllastlogindtinfo.getCaption();if(D!=null&&D!=""){E.lbllastlogindtinfo.setCaption(D)}this.show(linb([document.body]))})},_lnkhome_onclick:function(A,B){window.location.reload(true)},_lnkcontactus_onclick:function(A,C,D){this.setProperties({fromRegion:linb.use(D).cssRegion(true)});var B=this;linb.ComFactory.newCom("App.contactus",function(){this.show(linb([document.body]))})},_lnklogout_onclick:function(A,B){window.open("/eON/j_spring_security_logout","_self")},_lnkRealMarket_onclick:function(A,B){window.open("http://www.hontoichiba.com")},_menubar9_onmenuselected:function(A,E,C,D){this.setProperties({fromRegion:linb.use(D).cssRegion(true)});switch(C.id){case"fileChangePassword":var B=this;linb.ComFactory.newCom("App.changepassword",function(){var F=this;F.lblUserId.setCaption(_SPA.lblUserId.getCaption());F.iptUsername.setValue(_SPA.lbluseridinfo.getCaption());F.show(linb([document.body]))});break;case"fileLogoff":window.open("/eON/j_spring_security_logout","_self");break;case"helpAbout":linb.ComFactory.newCom("App.aboutEON",function(){this.setProperties({fromRegion:linb.use(D).cssRegion(true)});this.show(linb([document.body]))});break}},_getLoggedUser:function(){var A="/eON/login.json";var B=new Object;linb.Ajax(A,B,function(C){var E=_.unserialize(C);if(E.fail){var D=new Object();D=E.field;linb.alert(D.userName)}else{if(E.message!=null){var D=new Object();D=E.field;linb.alert(E.message)}else{_SPA.lbluser.setCaption(E.response.userName+" "+E.response.role.roleName);_SPA.lbluseridinfo.setCaption(E.response.userName);_SPA.lblusernameinfo.setCaption(E.response.name);_SPA.lblpasswordinfo.setCaption(E.response.password);_SPA.lbllastlogindtinfo.setCaption(E.response.dateLastLoginStr);_SPA.lbluser.setCaption(E.response.userName+" "+E.response.role.roleName);_SPA.lblUserId.setCaption(E.response.userId)}}},function(D,C,E){linb.alert("失敗： "+D)},null,{method:"POST"}).start()}}});